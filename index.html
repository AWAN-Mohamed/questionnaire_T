<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Questionnaire Emballages Alimentaires</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background: #f9f9f9; }
    .question { display: none; margin: 20px; }
    .hidden { display: none; }
    .result { margin-top: 20px; padding: 15px; border: 1px solid #ccc; background: #fff; border-radius: 10px; }
    img { max-width: 400px; margin: 20px 0; border-radius: 8px; }
    button { margin-top: 10px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 8px; background: #007BFF; color: white; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>Questionnaire : Emballages Alimentaires</h1>

  <!-- Zone image -->
  <div id="image-container" class="question">
    <h2>Regardez attentivement l'image</h2>
    <img id="image" src="">
  </div>

  <!-- Zone question -->
  <div id="question-container" class="question">
    <h2 id="question-text"></h2>
    <form id="answer-form">
      <div id="options"></div>
      <button type="submit">Valider</button>
    </form>
  </div>

  <!-- R√©sultats -->
  <div id="results" class="result hidden">
    <h2>Merci d'avoir r√©pondu ‚úÖ</h2>
    <p>Vos r√©ponses ont √©t√© envoy√©es.</p>
    <ul id="answers-list"></ul>
  </div>

  <script>
    // üìå Liste des questions + images
    const quiz = [
      { image: "emballage1.jpg", question: "Quel produit √©tait emball√© ?", options: ["Biscuits", "Chocolat", "Chips"] },
      { image: "emballage2.jpg", question: "De quelle mati√®re est l'emballage ?", options: ["Plastique", "Carton", "M√©tal"] },
      { image: "emballage3.jpg", question: "Quelle √©tait la couleur dominante ?", options: ["Rouge", "Vert", "Bleu"] },
      { image: "emballage4.jpg", question: "S'agit-il d'un produit sucr√© ou sal√© ?", options: ["Sucr√©", "Sal√©"] },
      { image: "emballage5.jpg", question: "Ce produit est destin√© principalement √† ?", options: ["Enfants", "Adultes", "Tous"] },
      { image: "emballage6.jpg", question: "Le produit est :", options: ["Boisson", "Snack", "Plat pr√©par√©"] },
      { image: "emballage7.jpg", question: "Quel logo apparaissait sur l‚Äôemballage ?", options: ["Bio", "Sans gluten", "Vegan"] },
      { image: "emballage8.jpg", question: "Cet emballage est-il recyclable ?", options: ["Oui", "Non", "Je ne sais pas"] },
      { image: "emballage9.jpg", question: "Quelle marque √©tait visible ?", options: ["Coca-Cola", "Nestl√©", "Pepsi"] },
      { image: "emballage10.jpg", question: "√Ä quelle cat√©gorie appartient ce produit ?", options: ["Boisson gazeuse", "Produit laitier", "Confiserie"] }
    ];

    let current = 0;
    let answers = [];

    const imageContainer = document.getElementById("image-container");
    const questionContainer = document.getElementById("question-container");
    const imageElement = document.getElementById("image");
    const questionText = document.getElementById("question-text");
    const optionsDiv = document.getElementById("options");
    const form = document.getElementById("answer-form");
    const results = document.getElementById("results");
    const answersList = document.getElementById("answers-list");

    function showImage() {
      imageElement.src = quiz[current].image;
      imageContainer.style.display = "block";
      questionContainer.style.display = "none";
      setTimeout(showQuestion, 4000); // image affich√©e 4 secondes avant question
    }

    function showQuestion() {
      imageContainer.style.display = "none";
      questionContainer.style.display = "block";
      questionText.textContent = quiz[current].question;
      optionsDiv.innerHTML = "";
      quiz[current].options.forEach(opt => {
        optionsDiv.innerHTML += `
          <label>
            <input type="radio" name="answer" value="${opt}" required> ${opt}
          </label><br>`;
      });
    }

    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const answer = form.answer.value;
      answers.push({ question: quiz[current].question, response: answer });

      current++;
      if (current < quiz.length) {
        form.reset();
        showImage();
      } else {
        showResults();
      }
    });

    function showResults() {
      questionContainer.style.display = "none";
      results.classList.remove("hidden");
      answersList.innerHTML = "";
      answers.forEach(a => {
        const li = document.createElement("li");
        li.textContent = `${a.question} ‚Üí ${a.response}`;
        answersList.appendChild(li);
      });
      sendResults();
    }

    // üì§ Envoi Google Sheets (tout en une seule requ√™te)
    async function sendResults() {
      const url = "https://script.google.com/macros/s/AKfycbyNYRwgrRqC5pA8Wbuc3iAQIqvsXmAACQzHJiQRSmqzsW7-9rCPFrEMSGp8XYQjkDeT8g/exec"; // ‚ö†Ô∏è Remplace par ton URL de d√©ploiement Apps Script
      try {
        await fetch(url, {
          method: "POST",
          body: JSON.stringify({
            reponses: answers,
            date: new Date().toISOString()
          }),
          headers: { "Content-Type": "application/json" }
        });
        console.log("‚úÖ R√©ponses envoy√©es dans Google Sheets !");
      } catch (error) {
        console.error("‚ùå Erreur envoi :", error);
        alert("Erreur lors de l‚Äôenvoi des r√©ponses.");
      }
    }

    // üöÄ D√©marrage
    showImage();
  </script>
</body>
</html>







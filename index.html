<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Questionnaire Emballages Alimentaires</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 20px;
      text-align: center;
    }

    h1 {
      color: #2c3e50;
    }

    /* üöÄ Barre de progression */
    .progress-container {
      width: 100%;
      background: #ddd;
      border-radius: 20px;
      margin: 20px auto;
      height: 20px;
      max-width: 600px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: #3498db;
      text-align: center;
      line-height: 20px;
      color: white;
      font-size: 12px;
      transition: width 0.4s ease;
    }

    .question {
      display: none;
      margin: 30px auto;
      max-width: 600px;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    img {
      max-width: 100%;
      border-radius: 8px;
      margin: 20px 0;
    }

    button {
      margin-top: 15px;
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      background: #3498db;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #2980b9;
    }

    label {
      display: block;
      margin: 10px 0;
      text-align: left;
    }

    .result {
      margin-top: 40px;
      padding: 20px;
      background: #eafaf1;
      border: 1px solid #2ecc71;
      border-radius: 12px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Questionnaire : Emballages Alimentaires</h1>

  <!-- üöÄ Barre de progression -->
  <div class="progress-container">
    <div class="progress-bar" id="progress-bar">0%</div>
  </div>

  <!-- Zone image -->
  <div id="image-container" class="question">
    <h2>Regardez attentivement l'image</h2>
    <img id="image" src="">
  </div>

  <!-- Zone question -->
  <div id="question-container" class="question">
    <h2 id="question-text"></h2>
    <form id="answer-form">
      <div id="options"></div>
      <button type="submit">Valider</button>
    </form>
  </div>

  <!-- R√©sultats -->
  <div id="results" class="result hidden">
    <h2>Merci d'avoir r√©pondu ‚úÖ</h2>
    <p>Vos r√©ponses ont √©t√© envoy√©es.</p>
  </div>

  <script>
    // üìå Questions + images
    const quiz = [
      { image: "emballage1.jpg", question: "Quel produit √©tait emball√© ?", options: ["Biscuits", "Chocolat", "Chips"] },
      { image: "emballage2.jpg", question: "De quelle mati√®re est l'emballage ?", options: ["Plastique", "Carton", "M√©tal"] },
      { image: "emballage3.jpg", question: "Quelle √©tait la couleur dominante ?", options: ["Rouge", "Vert", "Bleu"] },
      { image: "emballage4.jpg", question: "S'agit-il d'un produit sucr√© ou sal√© ?", options: ["Sucr√©", "Sal√©"] },
      { image: "emballage5.jpg", question: "Ce produit est destin√© principalement aux ?", options: ["Enfants", "Adultes", "Tous"] },
      { image: "emballage6.jpg", question: "Le produit est :", options: ["Boisson", "Snack", "Plat pr√©par√©"] },
      { image: "emballage7.jpg", question: "Quel logo apparaissait sur l‚Äôemballage ?", options: ["Bio", "Sans gluten", "Vegan"] },
      { image: "emballage8.jpg", question: "Cet emballage est-il recyclable ?", options: ["Oui", "Non", "Je ne sais pas"] },
      { image: "emballage9.jpg", question: "Quelle marque √©tait visible ?", options: ["Coca-Cola", "Nestl√©", "Pepsi"] },
      { image: "emballage10.jpg", question: "√Ä quelle cat√©gorie appartient ce produit ?", options: ["Boisson gazeuse", "Produit laitier", "Confiserie"] }
    ];

    let current = 0;
    let answers = [];

    const imageContainer = document.getElementById("image-container");
    const questionContainer = document.getElementById("question-container");
    const imageElement = document.getElementById("image");
    const questionText = document.getElementById("question-text");
    const optionsDiv = document.getElementById("options");
    const form = document.getElementById("answer-form");
    const results = document.getElementById("results");
    const progressBar = document.getElementById("progress-bar");

    function updateProgress() {
      const percent = Math.round(((current) / quiz.length) * 100);
      progressBar.style.width = percent + "%";
      progressBar.textContent = percent + "%";
    }

    function showImage() {
      updateProgress();
      imageElement.src = quiz[current].image;
      imageContainer.style.display = "block";
      questionContainer.style.display = "none";
      setTimeout(showQuestion, 3000); // ‚è≥ 3 secondes d‚Äôaffichage image
    }

    function showQuestion() {
      imageContainer.style.display = "none";
      questionContainer.style.display = "block";
      questionText.textContent = quiz[current].question;
      optionsDiv.innerHTML = "";
      quiz[current].options.forEach(opt => {
        optionsDiv.innerHTML += `
          <label>
            <input type="radio" name="answer" value="${opt}" required> ${opt}
          </label>`;
      });
    }

    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const answer = form.answer.value;
      answers.push({ question: quiz[current].question, response: answer });

      current++;
      if (current < quiz.length) {
        showImage();
      } else {
        showResults();
      }
    });

    function showResults() {
      questionContainer.style.display = "none";
      progressBar.style.width = "100%";
      progressBar.textContent = "100%";
      results.classList.remove("hidden");
      sendResults();
    }

    // üì§ Envoi vers Google Sheets en JSON
    function sendResults() {
      const url = "https://script.google.com/macros/s/AKfycbzESo3lNghAOgfq8UADcZD2OFsTTvPdTLYcGl9PWZAkU2SFueAi8o2qvgZEv6XGxtSv_A/exec"; // ‚ö†Ô∏è Remplace par ton URL
      const responses = answers.map(a => a.response);

      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ responses })
      })
      .then(res => res.json())
      .then(data => console.log("‚úÖ R√©ponses envoy√©es :", data))
      .catch(err => console.error("‚ùå Erreur envoi :", err));
    }

    // üöÄ D√©marrage
    showImage();
  </script>
</body>
</html>
